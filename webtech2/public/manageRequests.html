<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script type="text/javascript" src="js/angular.min.js"></script>
</head>
<body ng-app="index" ng-controller="indexCtrl">
    <div ng-repeat="x in request">
        Requests:<br />
        <table border="1">
            <tr>
                <td>User Name:</td>
                <td>{{ x.user }}</td>
            </tr>
            <tr>
                <td>Book name:</td>
                <td>{{ x.book }}</td>
            </tr>
            <tr>
                <td>Lend:</td>
                <td>
                    <form action="http://127.0.0.1:8081/lend" method="GET">
                        <input hidden="hidden" name="name" value="{{ x.user }}" />
                         <input hidden="hidden" name="book" value="{{x.book}}" />
                        <input type="submit" value="Submit">
                    </form>
                </td>
            </tr>
        </table>
    </div>
    <div ng-repeat="x in lends">
        Lends<br />
        <table border="1">
            <tr>
                <td>User Name:</td>
                <td>{{ x.name }}</td>
            </tr>
            <tr>
                <td>Book name:</td>
                <td>{{ x.book }}</td>
            </tr>
        </table>
    </div>

    <script>
        var index = angular.module("index", []);
        index.controller("indexCtrl", function ($scope, $http) {
            angular.element(document).ready(function () {
                $http.get('requests').then(function (response) {
                    $scope.request = response.data.request;
                });
                $http.get('lends').then(function (response) {
                    $scope.lends = response.data.lends;
                })
            });
        });
    </script>
</body>
</html>